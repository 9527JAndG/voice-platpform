# 测试数据配置完成 ✅

## 🎉 新增内容

### 1. 测试数据脚本
- ✅ `src/main/resources/test-data.sql` - 完整的测试数据脚本
  - 3 个平台的 OAuth 客户端配置
  - 3 个测试用户
  - 7 台扫地机器人设备（不同状态和场景）

### 2. 配置脚本
- ✅ `配置替换脚本.sh` - Linux/Mac 配置脚本
- ✅ `配置替换脚本.bat` - Windows 配置脚本
- 功能：自动替换平台配置占位符并导入数据库

### 3. 配置文档
- ✅ `平台配置说明.md` - 详细的平台配置指南
  - 天猫精灵配置步骤
  - 小度音箱配置步骤
  - 小爱同学配置步骤
  - 完整配置流程

- ✅ `测试数据说明.md` - 测试数据详细说明
  - OAuth 客户端数据
  - 测试用户数据
  - 扫地机器人设备数据
  - 测试场景说明
  - 数据重置方法

### 4. 更新的文档
- ✅ `使用说明.md` - 添加了测试数据导入说明
- ✅ `README.md` - 添加了测试数据说明
- ✅ `文档索引.md` - 添加了新文档的索引

## 📊 测试数据概览

### OAuth 客户端（4 个）
| 平台 | Client ID | 用途 |
|------|-----------|------|
| 天猫精灵 | YOUR_ALIGENIE_CLIENT_ID | 需要配置 |
| 小度音箱 | YOUR_DUEROS_CLIENT_ID | 需要配置 |
| 小爱同学 | YOUR_MIAI_CLIENT_ID | 需要配置 |
| 本地测试 | test_client_id | 已配置 |

### 测试用户（3 个）
| 用户名 | 密码 | 设备数量 |
|--------|------|---------|
| testuser | password123 | 4 台 |
| zhangsan | password123 | 2 台 |
| lisi | password123 | 1 台 |

### 扫地机器人设备（7 台）
| 设备ID | 名称 | 状态 | 电源 | 电量 | 场景 |
|--------|------|------|------|------|------|
| robot_001 | 客厅扫地机器人 | 在线 | 开机 | 85% | 正常工作 |
| robot_002 | 卧室扫地机器人 | 在线 | 关机 | 100% | 待机充电 |
| robot_003 | 书房扫地机器人 | 在线 | 开机 | 15% | 低电量 |
| robot_004 | 厨房扫地机器人 | 离线 | 关机 | 0% | 离线 |
| robot_005 | 客厅扫地机器人 | 在线 | 开机 | 60% | 沿边清扫 |
| robot_006 | 卧室扫地机器人 | 在线 | 关机 | 95% | 待机 |
| robot_007 | 全屋扫地机器人 | 在线 | 开机 | 75% | 正常工作 |

## 🚀 快速开始

### 步骤 1：配置平台信息

#### Windows 用户
```bash
# 1. 右键编辑 配置替换脚本.bat
# 2. 修改以下变量：
#    - ALIGENIE_CLIENT_ID
#    - ALIGENIE_CLIENT_SECRET
#    - DUEROS_CLIENT_ID
#    - DUEROS_CLIENT_SECRET
#    - MIAI_CLIENT_ID
#    - MIAI_CLIENT_SECRET
# 3. 保存并运行脚本
配置替换脚本.bat
```

#### Linux/Mac 用户
```bash
# 1. 编辑配置脚本
vim 配置替换脚本.sh

# 2. 修改以下变量：
#    - ALIGENIE_CLIENT_ID
#    - ALIGENIE_CLIENT_SECRET
#    - DUEROS_CLIENT_ID
#    - DUEROS_CLIENT_SECRET
#    - MIAI_CLIENT_ID
#    - MIAI_CLIENT_SECRET

# 3. 保存并运行脚本
bash 配置替换脚本.sh
```

### 步骤 2：导入数据库

配置脚本会自动提示导入数据库，按提示输入 MySQL 配置即可。

或者手动导入：
```bash
mysql -u root -p smarthomedb < src/main/resources/test-data-configured.sql
```

### 步骤 3：启动应用

```bash
mvn spring-boot:run
```

### 步骤 4：测试

#### 使用 Postman 测试
1. 导入 `postman_collection.json`
2. 测试 OAuth 授权流程
3. 测试设备发现和控制

#### 使用语音测试
1. 在各平台 App 中添加技能
2. 授权绑定账号（testuser / password123）
3. 语音控制设备

## 📝 配置说明

### 获取平台配置

#### 天猫精灵
1. 访问：https://aligenie.com
2. 创建智能家居技能
3. 配置 OAuth 和 Webhook
4. 获取 client_id 和 client_secret

#### 小度音箱
1. 访问：https://dueros.baidu.com
2. 创建智能家居技能
3. 配置账号关联和服务地址
4. 获取 client_id 和 client_secret

#### 小爱同学
1. 访问：https://iot.mi.com
2. 创建扫地机器人产品
3. 配置账号授权和服务地址
4. 获取 client_id 和 client_secret

详细步骤请查看：[平台配置说明.md](平台配置说明.md)

## 🧪 测试场景

### 场景 1：正常控制（robot_001）
```bash
# 设备状态：在线、开机、电量 85%
"天猫精灵，关闭客厅扫地机器人"
"小度小度，打开客厅扫地机器人"
"小爱同学，暂停客厅扫地机器人"
```

### 场景 2：待机设备（robot_002）
```bash
# 设备状态：在线、关机、电量 100%
"天猫精灵，打开卧室扫地机器人"
"小度小度，卧室扫地机器人电量还有多少"
```

### 场景 3：低电量设备（robot_003）
```bash
# 设备状态：在线、开机、电量 15%
"天猫精灵，书房扫地机器人电量还有多少"
"小爱同学，暂停书房扫地机器人"
```

### 场景 4：离线设备（robot_004）
```bash
# 设备状态：离线、关机、电量 0%
# 尝试控制应返回设备离线错误
"天猫精灵，打开厨房扫地机器人"
```

### 场景 5：多用户隔离
```bash
# testuser 登录：可以看到 robot_001 ~ robot_004
# zhangsan 登录：可以看到 robot_005 ~ robot_006
# lisi 登录：可以看到 robot_007
```

## 📖 相关文档

### 配置相关
- [平台配置说明.md](平台配置说明.md) - 详细的平台配置指南
- [测试数据说明.md](测试数据说明.md) - 测试数据详细说明
- [配置替换脚本.sh](配置替换脚本.sh) - Linux/Mac 配置脚本
- [配置替换脚本.bat](配置替换脚本.bat) - Windows 配置脚本

### 使用相关
- [README.md](README.md) - 项目说明
- [使用说明.md](使用说明.md) - 详细使用指南
- [QUICKSTART.md](QUICKSTART.md) - 快速开始

### 测试相关
- [小度音箱测试指南.md](小度音箱测试指南.md) - 小度测试指南
- [小爱同学测试指南.md](小爱同学测试指南.md) - 小爱测试指南
- [postman_collection.json](postman_collection.json) - Postman 测试集合

## ❓ 常见问题

### Q1: 如何获取平台的 client_id？
A: 需要在各平台的开放平台注册开发者账号并创建技能，详见 [平台配置说明.md](平台配置说明.md)

### Q2: 可以只配置一个平台吗？
A: 可以，只配置需要使用的平台即可。未配置的平台不影响其他平台的使用。

### Q3: 测试数据可以修改吗？
A: 可以，参考 [测试数据说明.md](测试数据说明.md) 中的"添加自定义设备"部分。

### Q4: 如何重置测试数据？
A: 参考 [测试数据说明.md](测试数据说明.md) 中的"数据重置"部分。

### Q5: 配置脚本运行失败怎么办？
A: 可以手动编辑 test-data.sql 文件，替换占位符后导入数据库。

## 🎯 下一步

1. ✅ 配置平台信息
2. ✅ 导入测试数据
3. ✅ 启动应用
4. ✅ 测试接口
5. ✅ 语音控制测试
6. 🔄 部署到生产环境（参考 [DEPLOYMENT.md](DEPLOYMENT.md)）

## 📞 技术支持

如有问题，请参考：
- [文档索引.md](文档索引.md) - 查找相关文档
- [使用说明.md](使用说明.md) - 常见问题解答
- 项目 Issues - 提交问题

---

**配置完成日期**：2026-02-24  
**测试数据版本**：v1.0  
**状态**：✅ 已完成

祝你使用愉快！🎉
