# 测试账号信息

## OAuth2 登录测试账号

系统使用数据库 `users` 表存储用户信息。测试账号如下：

| 用户名 | 密码 | 邮箱 | 说明 |
|--------|------|------|------|
| **user1** | **password** | user1@example.com | 推荐使用 |
| **user2** | **password** | user2@example.com | 推荐使用 |
| **testuser** | **password** | testuser@example.com | 推荐使用 |

**注意**: 
- 密码使用 BCrypt 加密存储在数据库中
- 如果数据库中没有用户，系统会在启动时自动创建这些测试用户
- 生产环境请修改密码并实现用户注册功能

## 使用方法

### 1. 浏览器测试

访问授权页面：
```
http://localhost:8080/oauth2/authorize?response_type=code&client_id=test_client_id&redirect_uri=http://localhost:8080/callback&state=test123
```

在登录页面输入：
- 用户名: `user1`
- 密码: `password`

### 2. Postman 测试

导入 `OAuth2_Postman_Collection.json` 测试集合，按照集合中的步骤测试。

### 3. 智能音箱平台测试

在各智能音箱平台的开发者控制台中配置 OAuth2 端点后，使用上述账号进行账号关联测试。

## OAuth 客户端信息

测试用的 OAuth 客户端配置：

| 字段 | 值 |
|------|-----|
| Client ID | test_client_id |
| Client Secret | test_client_secret |
| Redirect URI | http://localhost:8080/callback |
| Scopes | device:control,device:read |
| Grant Types | authorization_code, refresh_token, client_credentials |
| Token Type | jwt |

## 平台客户端配置

各智能音箱平台的客户端配置（需要在平台开发者控制台获取实际的 Client ID 和 Secret）：

### Amazon Alexa
- Client ID: `alexa_client` (示例，需替换为实际值)
- Client Secret: `alexa_secret` (示例，需替换为实际值)
- Authorization URI: `https://your-domain.com/oauth2/authorize`
- Token URI: `https://your-domain.com/oauth2/token`

### Google Assistant
- Client ID: `google_client` (示例，需替换为实际值)
- Client Secret: `google_secret` (示例，需替换为实际值)
- Authorization URL: `https://your-domain.com/oauth2/authorize`
- Token URL: `https://your-domain.com/oauth2/token`

### 天猫精灵
- Client ID: `aligenie_client` (示例，需替换为实际值)
- Client Secret: `aligenie_secret` (示例，需替换为实际值)
- 授权地址: `https://your-domain.com/authorize`
- Token 地址: `https://your-domain.com/token`

### 小度音箱
- Client ID: `dueros_client` (示例，需替换为实际值)
- Client Secret: `dueros_secret` (示例，需替换为实际值)
- 授权地址: `https://your-domain.com/authorize`
- Token 地址: `https://your-domain.com/token`

### 小爱同学
- Client ID: `miai_client` (示例，需替换为实际值)
- Client Secret: `miai_secret` (示例，需替换为实际值)
- 授权地址: `https://your-domain.com/authorize`
- Token 地址: `https://your-domain.com/token`

## 注意事项

1. **用户数据**: 用户信息存储在数据库 `users` 表中，密码使用 BCrypt 加密。如果数据库中没有用户，系统会在启动时自动创建测试用户。

2. **安全警告**: 这些是演示用的测试账号，密码简单且公开。生产环境必须：
   - 实现用户注册功能
   - 使用强密码策略
   - 添加多因素认证
   - 实现密码重置功能

3. **客户端密钥**: 示例中的 Client Secret 需要替换为实际的密钥，并使用 BCrypt 加密存储在数据库中。

3. **域名配置**: 将 `your-domain.com` 替换为实际的域名或 IP 地址。

4. **HTTPS**: 生产环境必须使用 HTTPS 协议。

## 相关文档

- [OAuth2 使用指南](OAuth2使用指南.md) - 完整的使用文档
- [OAuth 配置指南](OAuth配置指南.md) - 平台配置说明
- [测试数据说明](测试数据说明.md) - 设备测试数据

## 快速链接

- 授权页面: http://localhost:8080/oauth2/authorize
- 登录页面: http://localhost:8080/oauth2/login
- OIDC 发现: http://localhost:8080/.well-known/openid-configuration
- Token 端点: http://localhost:8080/oauth2/token
- Token 验证: http://localhost:8080/oauth2/introspect
- Token 撤销: http://localhost:8080/oauth2/revoke

---

**最后更新**: 2024-02-24
