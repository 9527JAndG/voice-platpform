{
  "version": "2.0",
  "name": "小度音箱测试用例集",
  "description": "小度音箱（DuerOS）智能家居控制 API 测试用例",
  "updated": "2026-02-25",
  "base_url": "http://localhost:8080",
  "test_user": {
    "username": "user1",
    "password": "password"
  },
  "test_cases": [
    {
      "id": "dueros-001",
      "name": "设备发现",
      "description": "测试小度音箱设备发现功能",
      "method": "POST",
      "endpoint": "/dueros/discovery",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Discovery",
          "name": "DiscoverAppliancesRequest",
          "messageId": "msg-discovery-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Discovery",
        "header_name": "DiscoverAppliancesResponse",
        "payload_contains": ["discoveredAppliances"]
      }
    },
    {
      "id": "dueros-002",
      "name": "设备开机",
      "description": "测试小度音箱设备开机功能",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "TurnOnRequest",
          "messageId": "msg-turnon-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "TurnOnConfirmation"
      }
    },
    {
      "id": "dueros-003",
      "name": "设备关机",
      "description": "测试小度音箱设备关机功能",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "TurnOffRequest",
          "messageId": "msg-turnoff-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "TurnOffConfirmation"
      }
    },
    {
      "id": "dueros-004",
      "name": "设备暂停",
      "description": "测试小度音箱设备暂停功能",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "PauseRequest",
          "messageId": "msg-pause-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "PauseConfirmation"
      }
    },
    {
      "id": "dueros-005",
      "name": "设备继续",
      "description": "测试小度音箱设备继续功能",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "ContinueRequest",
          "messageId": "msg-continue-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "ContinueConfirmation"
      }
    },
    {
      "id": "dueros-006",
      "name": "设置模式 - 自动模式",
      "description": "测试小度音箱设置设备为自动模式",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "SetModeRequest",
          "messageId": "msg-setmode-auto-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          },
          "additionalInfo": {
            "mode": "auto"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "SetModeConfirmation"
      }
    },
    {
      "id": "dueros-007",
      "name": "设置模式 - 定点模式",
      "description": "测试小度音箱设置设备为定点模式",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "SetModeRequest",
          "messageId": "msg-setmode-spot-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          },
          "additionalInfo": {
            "mode": "spot"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "SetModeConfirmation"
      }
    },
    {
      "id": "dueros-008",
      "name": "设置模式 - 沿边模式",
      "description": "测试小度音箱设置设备为沿边模式",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "SetModeRequest",
          "messageId": "msg-setmode-edge-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          },
          "additionalInfo": {
            "mode": "edge"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Control",
        "header_name": "SetModeConfirmation"
      }
    },
    {
      "id": "dueros-009",
      "name": "设备状态查询",
      "description": "测试小度音箱设备状态查询功能",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Query",
          "name": "GetStateRequest",
          "messageId": "msg-query-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "DuerOS.ConnectedHome.Query",
        "header_name": "GetStateResponse",
        "payload_contains": ["deviceState"]
      }
    },
    {
      "id": "dueros-010",
      "name": "错误处理 - 无效Token",
      "description": "测试无效Token的错误处理",
      "method": "POST",
      "endpoint": "/dueros/discovery",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer invalid_token_12345"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Discovery",
          "name": "DiscoverAppliancesRequest",
          "messageId": "msg-error-token-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "invalid_token_12345"
        }
      },
      "expected": {
        "status": 401,
        "error_code": "INVALID_TOKEN"
      }
    },
    {
      "id": "dueros-011",
      "name": "错误处理 - 设备不存在",
      "description": "测试设备不存在的错误处理",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "TurnOnRequest",
          "messageId": "msg-error-device-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "non-existent-device"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_name": "ErrorResponse",
        "error_code": "DEVICE_NOT_FOUND"
      }
    },
    {
      "id": "dueros-012",
      "name": "错误处理 - 无效模式",
      "description": "测试无效模式的错误处理",
      "method": "POST",
      "endpoint": "/dueros/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "DuerOS.ConnectedHome.Control",
          "name": "SetModeRequest",
          "messageId": "msg-error-mode-001",
          "payloadVersion": "1.0"
        },
        "payload": {
          "accessToken": "{{access_token}}",
          "appliance": {
            "applianceId": "vacuum-001"
          },
          "additionalInfo": {
            "mode": "invalid_mode"
          }
        }
      },
      "expected": {
        "status": 200,
        "header_name": "ErrorResponse",
        "error_code": "INVALID_MODE"
      }
    }
  ],
  "notes": [
    "测试前需要先获取 access_token",
    "使用 OAuth2 授权流程获取 token",
    "测试账号: user1/password",
    "测试设备: vacuum-001 (客厅扫地机器人)",
    "支持的模式: auto, spot, edge",
    "小度音箱使用 DuerOS ConnectedHome API",
    "请求格式包含 header 和 payload 两部分"
  ]
}
