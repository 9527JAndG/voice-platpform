{
	"info": {
		"_postman_id": "alexa-smarthome-v2",
		"name": "Alexa Smart Home API v2.0",
		"description": "完整的 Alexa Smart Home Skill API 测试集合，包含 AcceptGrant、ChangeReport 等新功能",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "voice-platform"
	},
	"item": [
		{
			"name": "0. AcceptGrant 授权",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.Authorization\",\n      \"name\": \"AcceptGrant\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-acceptgrant-001\"\n    },\n    \"payload\": {\n      \"grant\": {\n        \"type\": \"OAuth2.AuthorizationCode\",\n        \"code\": \"test_authorization_code_123\"\n      },\n      \"grantee\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"test_grantee_token_456\"\n      }\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试接受授权请求，用授权码换取 Alexa Access Token。成功后会保存 Token 到数据库。"
			},
			"response": []
		},
		{
			"name": "1. 设备发现",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.Discovery\",\n      \"name\": \"Discover\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-discovery-001\"\n    },\n    \"payload\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      }\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设备发现功能，返回用户的所有设备列表。"
			},
			"response": []
		},
		{
			"name": "2. 开机",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.PowerController\",\n      \"name\": \"TurnOn\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-turnon-001\",\n      \"correlationToken\": \"test-correlation-001\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {}\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设备开机功能。"
			},
			"response": []
		},
		{
			"name": "3. 关机",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.PowerController\",\n      \"name\": \"TurnOff\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-turnoff-001\",\n      \"correlationToken\": \"test-correlation-002\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {}\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设备关机功能。"
			},
			"response": []
		},
		{
			"name": "4. 设置模式 - Auto",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.ModeController\",\n      \"name\": \"SetMode\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-setmode-001\",\n      \"correlationToken\": \"test-correlation-003\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {\n      \"mode\": \"Auto\"\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设置清扫模式为自动模式。"
			},
			"response": []
		},
		{
			"name": "5. 设置模式 - Spot",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.ModeController\",\n      \"name\": \"SetMode\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-setmode-002\",\n      \"correlationToken\": \"test-correlation-004\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {\n      \"mode\": \"Spot\"\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设置清扫模式为定点清扫。"
			},
			"response": []
		},
		{
			"name": "6. 设置模式 - Edge",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.ModeController\",\n      \"name\": \"SetMode\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-setmode-003\",\n      \"correlationToken\": \"test-correlation-005\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {\n      \"mode\": \"Edge\"\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设置清扫模式为沿边清扫。"
			},
			"response": []
		},
		{
			"name": "7. 调整模式",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.ModeController\",\n      \"name\": \"AdjustMode\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-adjustmode-001\",\n      \"correlationToken\": \"test-correlation-006\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {\n      \"modeDelta\": 1\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试循环切换清扫模式。modeDelta: 1 表示下一个模式，-1 表示上一个模式。"
			},
			"response": []
		},
		{
			"name": "8. 状态报告",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa\",\n      \"name\": \"ReportState\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-reportstate-001\",\n      \"correlationToken\": \"test-correlation-007\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {}\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试查询设备当前状态，返回电源、模式、连接状态。"
			},
			"response": []
		},
		{
			"name": "错误: 设备不存在",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.PowerController\",\n      \"name\": \"TurnOn\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-error-001\",\n      \"correlationToken\": \"test-correlation-008\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"nonexistent_device\",\n      \"cookie\": {}\n    },\n    \"payload\": {}\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试访问不存在的设备，预期返回 NO_SUCH_ENDPOINT 错误。"
			},
			"response": []
		},
		{
			"name": "错误: 无效Token",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.PowerController\",\n      \"name\": \"TurnOn\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-error-002\",\n      \"correlationToken\": \"test-correlation-009\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"INVALID_TOKEN_12345\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {}\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试使用无效的访问令牌，预期返回 INVALID_AUTHORIZATION_CREDENTIAL 错误。"
			},
			"response": []
		},
		{
			"name": "错误: 无效模式",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"directive\": {\n    \"header\": {\n      \"namespace\": \"Alexa.ModeController\",\n      \"name\": \"SetMode\",\n      \"payloadVersion\": \"3\",\n      \"messageId\": \"test-error-003\",\n      \"correlationToken\": \"test-correlation-010\"\n    },\n    \"endpoint\": {\n      \"scope\": {\n        \"type\": \"BearerToken\",\n        \"token\": \"{{access_token}}\"\n      },\n      \"endpointId\": \"{{device_id}}\",\n      \"cookie\": {}\n    },\n    \"payload\": {\n      \"mode\": \"InvalidMode\"\n    }\n  }\n}"
				},
				"url": {
					"raw": "{{base_url}}/alexa",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"alexa"
					]
				},
				"description": "测试设置不支持的清扫模式，预期返回 INVALID_VALUE 错误。"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "YOUR_ACCESS_TOKEN_HERE",
			"type": "string"
		},
		{
			"key": "device_id",
			"value": "device-001",
			"type": "string"
		}
	]
}
