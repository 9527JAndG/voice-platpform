{
  "version": "2.0",
  "name": "天猫精灵测试用例集",
  "description": "天猫精灵智能家居控制 API 测试用例",
  "updated": "2026-02-25",
  "base_url": "http://localhost:8080",
  "test_user": {
    "username": "user1",
    "password": "password"
  },
  "test_cases": [
    {
      "id": "aligenie-001",
      "name": "设备发现",
      "description": "测试天猫精灵设备发现功能",
      "method": "POST",
      "endpoint": "/aligenie/discovery",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Discovery",
          "name": "DiscoveryDevices",
          "messageId": "msg-discovery-001",
          "payloadVersion": "1"
        },
        "payload": {}
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Discovery",
        "header_name": "DiscoveryResponse",
        "payload_contains": ["devices"]
      }
    },
    {
      "id": "aligenie-002",
      "name": "设备开机",
      "description": "测试天猫精灵设备开机功能",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "TurnOn",
          "messageId": "msg-turnon-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "TurnOnResponse"
      }
    },
    {
      "id": "aligenie-003",
      "name": "设备关机",
      "description": "测试天猫精灵设备关机功能",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "TurnOff",
          "messageId": "msg-turnoff-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "TurnOffResponse"
      }
    },
    {
      "id": "aligenie-004",
      "name": "设备暂停",
      "description": "测试天猫精灵设备暂停功能",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "Pause",
          "messageId": "msg-pause-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "PauseResponse"
      }
    },
    {
      "id": "aligenie-005",
      "name": "设备继续",
      "description": "测试天猫精灵设备继续功能",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "Continue",
          "messageId": "msg-continue-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "ContinueResponse"
      }
    },
    {
      "id": "aligenie-006",
      "name": "设置模式 - 自动模式",
      "description": "测试天猫精灵设置设备为自动模式",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "SetMode",
          "messageId": "msg-setmode-auto-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001",
          "mode": "auto"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "SetModeResponse"
      }
    },
    {
      "id": "aligenie-007",
      "name": "设置模式 - 定点模式",
      "description": "测试天猫精灵设置设备为定点模式",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "SetMode",
          "messageId": "msg-setmode-spot-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001",
          "mode": "spot"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "SetModeResponse"
      }
    },
    {
      "id": "aligenie-008",
      "name": "设置模式 - 沿边模式",
      "description": "测试天猫精灵设置设备为沿边模式",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "SetMode",
          "messageId": "msg-setmode-edge-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001",
          "mode": "edge"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Control",
        "header_name": "SetModeResponse"
      }
    },
    {
      "id": "aligenie-009",
      "name": "设备状态查询",
      "description": "测试天猫精灵设备状态查询功能",
      "method": "POST",
      "endpoint": "/aligenie/query",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Query",
          "name": "Query",
          "messageId": "msg-query-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Query",
        "header_name": "QueryResponse",
        "payload_contains": ["properties"]
      }
    },
    {
      "id": "aligenie-010",
      "name": "错误处理 - 无效Token",
      "description": "测试无效Token的错误处理",
      "method": "POST",
      "endpoint": "/aligenie/discovery",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer invalid_token_12345"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Discovery",
          "name": "DiscoveryDevices",
          "messageId": "msg-error-token-001",
          "payloadVersion": "1"
        },
        "payload": {}
      },
      "expected": {
        "status": 401,
        "error_code": "INVALID_TOKEN"
      }
    },
    {
      "id": "aligenie-011",
      "name": "错误处理 - 设备不存在",
      "description": "测试设备不存在的错误处理",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "TurnOn",
          "messageId": "msg-error-device-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "non-existent-device"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Error",
        "header_name": "ErrorResponse",
        "error_code": "DEVICE_NOT_FOUND"
      }
    },
    {
      "id": "aligenie-012",
      "name": "错误处理 - 无效模式",
      "description": "测试无效模式的错误处理",
      "method": "POST",
      "endpoint": "/aligenie/control",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "header": {
          "namespace": "AliGenie.Iot.Device.Control",
          "name": "SetMode",
          "messageId": "msg-error-mode-001",
          "payloadVersion": "1"
        },
        "payload": {
          "deviceId": "vacuum-001",
          "mode": "invalid_mode"
        }
      },
      "expected": {
        "status": 200,
        "header_namespace": "AliGenie.Iot.Device.Error",
        "header_name": "ErrorResponse",
        "error_code": "INVALID_MODE"
      }
    }
  ],
  "notes": [
    "测试前需要先获取 access_token",
    "使用 OAuth2 授权流程获取 token",
    "测试账号: user1/password",
    "测试设备: vacuum-001 (客厅扫地机器人)",
    "支持的模式: auto, spot, edge"
  ]
}
