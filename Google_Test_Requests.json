{
  "version": "2.0",
  "description": "Google Assistant 测试用例集合",
  "updated": "2026-02-25",
  "base_url": "http://localhost:8080",
  "test_cases": [
    {
      "id": 1,
      "name": "SYNC - 设备发现",
      "description": "测试设备发现功能，返回用户的所有设备",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.SYNC"
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "requestId",
          "payload",
          "agentUserId",
          "devices"
        ]
      }
    },
    {
      "id": 2,
      "name": "QUERY - 查询设备状态",
      "description": "查询指定设备的当前状态",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.QUERY",
            "payload": {
              "devices": [
                {
                  "id": "robot_001"
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "requestId",
          "payload",
          "devices",
          "online",
          "on"
        ]
      }
    },
    {
      "id": 3,
      "name": "EXECUTE - 打开设备",
      "description": "执行打开设备命令",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.OnOff",
                      "params": {
                        "on": true
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "requestId",
          "payload",
          "commands",
          "SUCCESS"
        ]
      }
    },
    {
      "id": 4,
      "name": "EXECUTE - 关闭设备",
      "description": "执行关闭设备命令",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.OnOff",
                      "params": {
                        "on": false
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS"
        ]
      }
    },
    {
      "id": 5,
      "name": "EXECUTE - 启动清扫",
      "description": "执行启动清扫命令",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.StartStop",
                      "params": {
                        "start": true
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS",
          "isRunning"
        ]
      }
    },
    {
      "id": 6,
      "name": "EXECUTE - 停止清扫",
      "description": "执行停止清扫命令",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.StartStop",
                      "params": {
                        "start": false
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS"
        ]
      }
    },
    {
      "id": 7,
      "name": "EXECUTE - 暂停清扫",
      "description": "执行暂停清扫命令",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.PauseUnpause",
                      "params": {
                        "pause": true
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS",
          "isPaused"
        ]
      }
    },
    {
      "id": 8,
      "name": "EXECUTE - 回充",
      "description": "执行回充命令",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.Dock"
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS",
          "isDocked"
        ]
      }
    },
    {
      "id": 9,
      "name": "EXECUTE - 设置清扫模式（自动）",
      "description": "设置清扫模式为自动模式",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.SetModes",
                      "params": {
                        "updateModeSettings": {
                          "clean_mode": "auto"
                        }
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS",
          "currentModeSettings"
        ]
      }
    },
    {
      "id": 10,
      "name": "EXECUTE - 设置清扫模式（定点）",
      "description": "设置清扫模式为定点模式",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.SetModes",
                      "params": {
                        "updateModeSettings": {
                          "clean_mode": "spot"
                        }
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS"
        ]
      }
    },
    {
      "id": 11,
      "name": "EXECUTE - 定位设备",
      "description": "执行定位设备命令（播放声音）",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.EXECUTE",
            "payload": {
              "commands": [
                {
                  "devices": [
                    {
                      "id": "robot_001"
                    }
                  ],
                  "execution": [
                    {
                      "command": "action.devices.commands.Locate",
                      "params": {
                        "silent": false
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "SUCCESS"
        ]
      }
    },
    {
      "id": 12,
      "name": "DISCONNECT - 账号解绑",
      "description": "测试账号解绑功能",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.DISCONNECT"
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "requestId"
        ]
      }
    },
    {
      "id": 13,
      "name": "错误测试 - 设备不存在",
      "description": "测试查询不存在的设备",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer {{access_token}}"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.QUERY",
            "payload": {
              "devices": [
                {
                  "id": "robot_999"
                }
              ]
            }
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "ERROR",
          "deviceNotFound"
        ]
      }
    },
    {
      "id": 14,
      "name": "错误测试 - Token 无效",
      "description": "测试使用无效的 Token",
      "method": "POST",
      "url": "/google/fulfillment",
      "headers": {
        "Content-Type": "application/json",
        "Authorization": "Bearer invalid_token_12345"
      },
      "body": {
        "requestId": "ff36a3cc-ec34-11e6-b1a0-64510650abcf",
        "inputs": [
          {
            "intent": "action.devices.SYNC"
          }
        ]
      },
      "expected_response": {
        "status": 200,
        "body_contains": [
          "authFailure"
        ]
      }
    }
  ],
  "notes": [
    "测试前需要先获取 access_token",
    "使用 OAuth2 Token 接口获取: POST /oauth2/token",
    "测试账号: user1/password, user2/password",
    "设备ID: robot_001, robot_002, robot_003"
  ]
}
